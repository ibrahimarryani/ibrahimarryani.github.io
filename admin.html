<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>لوحة إدارة Velora</title>
  <style>
    body { font-family: Tahoma, sans-serif; margin: 0; padding: 0; background: #f7f7f7; }
    header { background: #d63384; color: white; padding: 15px; text-align: center; font-size: 22px; font-weight: bold; }
    .container { max-width: 800px; margin: 20px auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    input, textarea { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #ccc; border-radius: 8px; }
    button { padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
    .btn-add { background: #d63384; color: white; }
    .btn-del { background: crimson; color: white; margin-top: 8px; }
    .product { border-bottom: 1px solid #eee; padding: 10px 0; }
    .login-box { max-width: 400px; margin: 50px auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); text-align: center; }
  </style>
</head>
<body>
  <header>🛠️ لوحة إدارة Velora</header>

  <!-- شاشة تسجيل الدخول -->
  <div id="loginScreen" class="login-box">
    <h3>تسجيل الدخول</h3>
    <input type="password" id="adminPass" placeholder="أدخل كلمة المرور">
    <button onclick="login()">دخول</button>
    <p style="color:#777;font-size:13px">كلمة المرور الافتراضية: <b>12345</b></p>
  </div>

  <!-- شاشة الإدارة -->
  <div id="adminPanel" class="container" style="display:none">
    <h2>➕ إضافة منتج</h2>
    <input type="text" id="pname" placeholder="اسم المنتج">
    <textarea id="pdesc" placeholder="وصف المنتج"></textarea>
    <input type="number" id="pprice" placeholder="السعر بالدينار">
    <input type="text" id="pimg" placeholder="رابط الصورة (URL)">
    <button class="btn-add" onclick="addProduct()">إضافة المنتج</button>

    <hr>
    <h2>📦 المنتجات الحالية</h2>
    <div id="productsList"></div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>

  <script>
    // ⚡ استبدل القيم بمشروعك من Firebase Console 
    const firebaseConfig = {
  apiKey: "AIzaSyBoml2q6nuXBLISBN3aOEQNnTMPTHj2Vuw",
  authDomain: "velora-c15bd.firebaseapp.com",
  projectId: "velora-c15bd",
  storageBucket: "velora-c15bd.firebasestorage.app",
  messagingSenderId: "803177822274",
  appId: "1:803177822274:web:e86e5541f8a97f15c895db",
  measurementId: "G-GXQHTK9RZ0"
};

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const loginScreen = document.getElementById("loginScreen");
    const adminPanel = document.getElementById("adminPanel");
    const passInput = document.getElementById("adminPass");

    function login() {
      if (passInput.value === "12345") { // تقدر تغير كلمة السر هنا
        loginScreen.style.display = "none";
        adminPanel.style.display = "block";
        loadProducts();
      } else {
        alert("❌ كلمة المرور غير صحيحة");
      }
    }

    async function addProduct() {
      const name = document.getElementById("pname").value;
      const desc = document.getElementById("pdesc").value;
      const price = document.getElementById("pprice").value;
      const img = document.getElementById("pimg").value;

      if (!name || !desc || !price || !img) {
        alert("⚠️ يرجى إدخال كل البيانات");
        return;
      }

      await db.collection("products").add({
        name, description: desc, price, image: img
      });

      alert("✅ تم إضافة المنتج");
      loadProducts();
    }

    async function deleteProduct(id) {
      await db.collection("products").doc(id).delete();
      alert("🗑️ تم حذف المنتج");
      loadProducts();
    }

    async function loadProducts() {
      const list = document.getElementById("productsList");
      list.innerHTML = "⏳ جاري تحميل المنتجات...";
      const snapshot = await db.collection("products").get();
      list.innerHTML = "";
      snapshot.forEach(doc => {
        const p = doc.data();
        const div = document.createElement("div");
        div.className = "product";
        div.innerHTML = `
          <h3>${p.name} - <span style="color:#d63384">${p.price} د.ل</span></h3>
          <p>${p.description}</p>
          <img src="${p.image}" alt="${p.name}" style="max-width:120px;border-radius:8px">
          <br>
          <button class="btn-del" onclick="deleteProduct('${doc.id}')">حذف</button>
        `;
        list.appendChild(div);
      });
    }
  </script>
</body>
</html>
